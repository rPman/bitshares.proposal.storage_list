# Предложение по улучшению bitshares для хранения списков #

## Цель ##
Для создания децентрализхованных приложений DAPP на базе блокчейна bitshares требуются механизмы для хранения данных.
На текущий момент поле memo в обычных *transfer* транзакциях более чем достаточно, разработчики могут использовать его для хранения сарилизованных данных своих объектов, наапример по одному на транзакцию, с доступом по идентификатору этой транзакции.
Но для реализации списков объектов нет никаких инструментов. На клиентской стороне, единственное что доступно - полное пересканирование блокчейна на предмет наличия транзакций с нужными данными, что очень не эффективно.
## Решение ##
Необходимо разработать новый тип объекта - список.
Список - это именованный объект, в котором хранится упорядоченный список уникальных идентификаторов (std::set<id>) объектов bitshares (на практике имеют смысл только другие списки и транзакции, содержащие memo)
> опционально можно реализовать более сложный список, например key-value map
1. список должен иметь имя (в дополнение к естественному идентификатору объекта в блокчейне)
> имя должно быть уникальное в пределах всего блокейна, либо в пределах области владения - аккаунт или токен, в этом случае к имени добавляется эта область через точку
> в случае реализации общего списка имен, по аналогии с токенами можно предотавратить создание имен, содержащих точку и имя аккаутна/токена
2. права доступа к элементам списка
> Права должны относиться ко всем пользователям сети (т.е. либо всем разрешено либо запрещено), за исключением владельца
> владелец имеет полные права, (необходимо хорошо продумать возможность удаления всего списка как объекта, возможно это идеологически необходимо запретить)
>> опционально можно реализовать белые и черные списки как у токенов, самое простое - привязать объекты-списки к токенам, наследуя их настройки
>> либо сами права задавать списком аккаунтов и переключателем белый это список или черный
> * право добавление
>> опционально можно разрешить только добавление в конец списка
> * право замену элемента
> * право на удаление элмента
>> можно добавить запрет на изменение списка владельцем, т.е. список будет доступен только на добавление элементов
>> если нужно ограничивать права доступа пользователям только к своим элементам списка, то достаточно реализовывать такие списки многоуровневыми: первый уровень это список списков, создаваемых у каждого пользователя с соответствующими правами
3. операции над списком это транзакции
> в одной транзакции может быть несколько операций, пакетом (можно ограничить одним типом операции)
> * добавление - вставка объекта перед указанным, два параметра id (второй опциональный)
> * замена элемента - элемент в списке удаляется и заменяется на указанный (иначе понадобилось бы две операции)
> * удаление - элемент в списке удаляется, один параметр id
> * удаление списка
4. дополнительно
> * api-нода должна максимально оптимально работать со списками и быть готовой что такие списки будут быстро расти (например не хранить весь список в памяти а сбрасывать его на диск, поддерживать индексы для перемещения по списку вперед/назад и переход по порядоковому номеру)
## пример использования ##
Пользователи могут хранить заявки на обмен смарттокенов на реальный актив, создавая их у себя на аккаунте в виде списка (только для чтения), а операции по этим сделкам отмечать в публичных списках (только на добавление), по одному у участника сделки.
Публичные списки могут использоваться как отметки исполнения или не исполнения сделки и использоваться для вычисления рейтинга пользователя (какие и сколько было исполнено/не исполнено сделок, отзывы пользователей и прочее)
